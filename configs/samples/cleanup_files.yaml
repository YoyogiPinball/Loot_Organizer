# ========================================
# ✨ ファイルクリーンアップサンプル
# ========================================
#
# 【このサンプルについて】
# Zipplaなどのツールでラベリングしたファイルの整理に最適な設定例です。
# 削除 → クリーンアップ → 振り分けの3ステップでファイルを整理します。
#
# 【使い方】
# 1. このファイルを configs/my_cleanup.yaml にコピー
# 2. target_directory を自分の環境に合わせて変更
# 3. 削除したい文字列、振り分けルールを追加・編集
#
# 【想定ワークフロー】
# ダウンロード → Sort モードで大まかに振り分け
#              → Zippla等でラベリング（r=5, t=V など）
#              → Clean モードでクリーンアップ
#
# ========================================

meta:
  name: "ファイルクリーンアップ"
  icon: "✨"
  mode: "Clean"
  description: "絵文字除去・低レート削除・ラベル別振り分け"

# =====================================
# 基本設定
# =====================================
settings:
  # 処理対象のディレクトリ
  # 例: Sortモードで振り分けた後のフォルダ
  target_directory: "D:\\SortedFiles\\Videos"

  # ログを記録するか
  enable_logging: true

  # 実行前に確認プロンプトを表示するか
  confirm_before_execute: true

  # ドライラン（プレビューのみ、実際には実行しない）をデフォルトで有効化
  dry_run_default: true

  # プレビュー表示設定
  preview:
    mode: "both"      # head: 先頭のみ / tail: 末尾のみ / both: 両端 / all: 全件
    count: 3          # 表示件数（modeがhead/tail/bothの場合）

  # ログ設定
  logging:
    log_success: true              # 成功したファイル操作もログに記録
    log_directory: "logs"          # ログ保存先

# =====================================
# ステップ1: 特定文字列を含むファイルの削除
# =====================================
# Zipplaでラベリングした低レートファイルを削除
#
deletion:
  # この処理を有効にするか（true/false）
  enabled: true

  # 削除対象の文字列リスト
  # ファイル名にこれらの文字列が含まれていると削除されます
  strings:
    - "{zpi$r=1}"    # レート1（低レート）
    # - "{zpi$r=2}"  # レート2も削除したい場合はコメント解除

  # サブフォルダも再帰的に検索するか（true/false）
  recursive: true

# =====================================
# ステップ2: ファイル名のクリーンアップ
# =====================================
# 絵文字や特殊文字を削除してクリーンなファイル名に
# （Android端末での互換性向上、ファイル管理の簡便化）
#
cleanup:
  # この処理を有効にするか（true/false）
  enabled: true

  # サブフォルダも再帰的に処理するか（true/false）
  recursive: true

  # カスタムクリーンアップパターン（正規表現）
  # デフォルトで絵文字や特殊文字を削除しますが、追加パターンを指定できます
  custom_patterns: []
  # 追加例:
  # - '[【】]'          # 全角カッコを削除
  # - '\\[.*?\\]'       # 角カッコとその中身を削除
  # - '\\(\\d+\\)'      # (1), (2) のような連番を削除

# =====================================
# ステップ3: ファイル振り分けルール
# =====================================
# Zipplaでラベリングしたファイルを各フォルダに振り分け
#
# 各ルールの構成:
#   - search: 検索パターン（ワイルドカード可: * や ?）
#   - destination: 移動先ディレクトリ（絶対パス推奨）
#   - action: 操作種類
#       * copy: コピー（元ファイルを残す）
#       * move: 移動（元ファイルを削除）
#       * delete: 削除のみ
#
sorting_rules:
  # -------------------------------
  # レート別振り分け
  # -------------------------------
  # 高レートファイルはコピーして保護
  - search: "*r=5*"
    destination: "D:\\HighRated\\Videos"
    action: "copy"

  - search: "*r=4*"
    destination: "D:\\MediumRated\\Videos"
    action: "copy"

  # -------------------------------
  # タグ別振り分け（移動）
  # -------------------------------
  - search: "*t=V*"
    destination: "D:\\Videos\\Tagged\\V"
    action: "move"

  - search: "*t=pic*"
    destination: "D:\\Pictures\\Tagged\\pic"
    action: "move"

  - search: "*t=ReAct*"
    destination: "D:\\Videos\\Tagged\\ReAct"
    action: "move"

  - search: "*t=774*"
    destination: "D:\\Archives\\774"
    action: "move"

  # -------------------------------
  # レート＋タグ複合例
  # -------------------------------
  # 注: AND条件はルール内で組み合わせ不可
  #     複合条件はファイル名パターンで対応
  - search: "*r=5*t=V*"
    destination: "D:\\BestVideos\\V"
    action: "copy"

  # -------------------------------
  # 特定拡張子の削除例
  # -------------------------------
  # 例: Zipplaのメタデータファイルなどを削除
  # - search: "*.zpi_meta"
  #   destination: ""    # destination不要（deleteの場合）
  #   action: "delete"
